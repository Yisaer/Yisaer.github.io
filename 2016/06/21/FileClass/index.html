<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>File类与RandomAccessFile类 6月21日 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="主要复习了File类与RandomAccessFile类的常用API">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="File类与RandomAccessFile类 6月21日">
<meta property="og:url" content="http://yoursite.com/2016/06/21/FileClass/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="主要复习了File类与RandomAccessFile类的常用API">
<meta property="og:updated_time" content="2016-06-21T15:36:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="File类与RandomAccessFile类 6月21日">
<meta name="twitter:description" content="主要复习了File类与RandomAccessFile类的常用API">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-FileClass" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/21/FileClass/" class="article-date">
  <time datetime="2016-06-21T15:33:49.000Z" itemprop="datePublished">2016-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      File类与RandomAccessFile类 6月21日
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>主要复习了File类与RandomAccessFile类的常用API</p>
<a id="more"></a>
<h1 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h1><p>File类是JavaIO下的一个类，用于操作文件和目录</p>
<h2 id="构造方法摘要"><a href="#构造方法摘要" class="headerlink" title="构造方法摘要"></a>构造方法摘要</h2><p>值得一提的是，创建File类对象并且是在机器上创造出一个文件，或者目录，而是创造出File对象来对应机器内的实体文件。</p>
<pre><code>File(File parent, String child) 
          根据 parent 抽象路径名和 child 路径名字符串创建一个新 File 实例。 
File(String pathname) 
          通过将给定路径名字符串转换为抽象路径名来创建一个新 File 实例。 
File(String parent, String child) 
          根据 parent 路径名字符串和 child 路径名字符串创建一个新 File 实例。 
File(URI uri) 
          通过将给定的 file: URI 转换为一个抽象路径名来创建一个新的 File 实例。 
</code></pre><h2 id="目录的创建与删除"><a href="#目录的创建与删除" class="headerlink" title="目录的创建与删除"></a>目录的创建与删除</h2><p>那么如果我们要创建这个目录或删除这个目录的话，首先我们要确定是否存在目录，</p>
<p>那么就可以使用以下来做到</p>
<pre><code>if(!file.exists()){
    file.mkdir();
}
else{
    file.delete();
}
</code></pre><p>注意点： File构造方法里中，文件的目录路径里的分隔符可以用File.seprator代替</p>
<pre><code>isDirectory() 
      测试此抽象路径名表示的文件是否是一个目录。 
 boolean isFile() 
          测试此抽象路径名表示的文件是否是一个标准文件。 
</code></pre><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><p>使用CreateNewFile来创建文件</p>
<pre><code>File file = new File(&quot;E:\\日记1.txt&quot;);
if(!file.exists()){
    try {
        file.createNewFile();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }     
}
</code></pre><p><strong>boolean createNewFile()</strong></p>
<p>当且仅当不存在具有此抽象路径名指定名称的文件时，不可分地创建一个新的空文件 </p>
<h2 id="FileUtil"><a href="#FileUtil" class="headerlink" title="FileUtil"></a>FileUtil</h2><p>在使用File类时，我们最好将其各种功能实现一个工具类，这里我实现了一个ListDirectory类的操作</p>
<pre><code>/**
 * 列出指定目录下（包括其子目录的所有文件）
 * @param dir
 * @throws IOException
 */
public static void ListDirectory(File dir)throws IOException{    
    if(!dir.exists()){
        throw new IllegalArgumentException(&quot;目录&quot;+dir+&quot;不存在&quot;);
    }
    if(!dir.isDirectory()){
        throw new IllegalArgumentException(dir+&quot;不是目录&quot;);
    }

    File[] files = dir.listFiles();
    if(files!=null &amp;&amp; files.length&gt;0){
        for(File file:files){
            if(file.isDirectory()){
                ListDirectory(file);        
            }
            else{
                System.out.println(file);
            }
        } 
    }
}
</code></pre><h2 id="RandomAccessFile"><a href="#RandomAccessFile" class="headerlink" title="RandomAccessFile"></a>RandomAccessFile</h2><p>File类支持表示文件的信息，但不支持对文件的读与写，<br>与之相反，RandomAccessFile类支持对文件内容的访问，既可以读，也可以写，并且该类存在一个文件指针，支持随机访问文件，访问文件的任意位置。</p>
<h3 id="打开模式"><a href="#打开模式" class="headerlink" title="打开模式"></a>打开模式</h3><p>有两种模式 </p>
<ul>
<li>“rw” 读写模式</li>
<li>“r”  只读模式</li>
</ul>
<pre><code>RandomAccessFile raf =  new RandomAccessFile(file,&quot;rw&quot;);
</code></pre><p>在打开文件时， 文件指针在开头。</p>
<h3 id="读写"><a href="#读写" class="headerlink" title="读写"></a>读写</h3><p> 读写方法都是以一个字节(8位)一个字节的读写，并且在文件读写完成后必须将文件关闭。</p>
<pre><code>package FileDemo;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.Arrays;

public class Main {

    public static void main(String[] args) throws IOException{
        // TODO Auto-generated method stub
        File demo = new File(&quot;demo&quot;);
        if(!demo.exists()){
            demo.mkdir();
        }
        File file = new File(demo,&quot;raf.dat&quot;);
        if(!file.exists()){
            try {
                file.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        RandomAccessFile raf = new RandomAccessFile(file,&quot;rw&quot;);

        //显示文件指针
        System.out.println(raf.getFilePointer());

        // 写入一个int整数， int整数有4个字节，write每次只读1个字节
        int a = 0x7fffffff;
        raf.write(a&gt;&gt;24);
        raf.write(a&gt;&gt;16);
        raf.write(a&gt;&gt;8);
        raf.write(a);

        // 也可以直接写入writeint
        raf.writeInt(a);

        //写中文
        String s = &quot;中文&quot;;
        byte[] gbk = s.getBytes(&quot;gbk&quot;);
        raf.write(gbk);

        // 读文件，必须把指针移到头部
        raf.seek(0);
        // 一次性读取
        byte [] buf = new byte[(int) (raf.length())];
        raf.read(buf);
        System.out.println(Arrays.toString(buf));

        // 以16进制表示
        for(byte b : buf){
            System.out.print(Integer.toHexString(b&amp;0xff)+&quot; &quot;);
        }

        // 最终要关闭
        raf.close();
    }
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/21/FileClass/" data-id="cjbqmub5u0006u908ufkzzdbo" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/06/26/Serializanle/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          浅谈对象序列化与非序列化
        
      </div>
    </a>
  
  
    <a href="/2016/06/21/BS-endian/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">什么是大端、小端模式？</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/essay/">essay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbc/">jdbc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsp/">jsp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/regex/">regex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作/">工作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/操作系统/">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数论/">数论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/概率论/">概率论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则/">正则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络/">计算机网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/OS/" style="font-size: 10px;">OS</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/c/" style="font-size: 15px;">c</a> <a href="/tags/essay/" style="font-size: 15px;">essay</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/jdbc/" style="font-size: 10px;">jdbc</a> <a href="/tags/jsp/" style="font-size: 10px;">jsp</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/regex/" style="font-size: 10px;">regex</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/工作/" style="font-size: 12.5px;">工作</a> <a href="/tags/操作系统/" style="font-size: 17.5px;">操作系统</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 17.5px;">数据结构</a> <a href="/tags/数论/" style="font-size: 15px;">数论</a> <a href="/tags/概率论/" style="font-size: 12.5px;">概率论</a> <a href="/tags/正则/" style="font-size: 10px;">正则</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/计算机网络/" style="font-size: 10px;">计算机网络</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/09/29/Life/">生活与工作</a>
          </li>
        
          <li>
            <a href="/2017/07/16/intern1/">在大摩实习的日子</a>
          </li>
        
          <li>
            <a href="/2017/05/07/Redis1/">Redis中利用sizeof从sds转为sdshdr</a>
          </li>
        
          <li>
            <a href="/2017/05/07/dowhile/">do{...} while(0) 的意义和用法</a>
          </li>
        
          <li>
            <a href="/2017/03/23/pwd/">浅析unix文件系统</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>